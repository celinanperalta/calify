{"ast":null,"code":"import _slicedToArray from \"/Users/celinaperalta/Documents/SideProjects/spotify-react-app-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"/Users/celinaperalta/Documents/SideProjects/spotify-react-app-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/celinaperalta/Documents/SideProjects/spotify-react-app-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/celinaperalta/Documents/SideProjects/spotify-react-app-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/celinaperalta/Documents/SideProjects/spotify-react-app-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/celinaperalta/Documents/SideProjects/spotify-react-app-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/celinaperalta/Documents/SideProjects/spotify-react-app-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/celinaperalta/Documents/SideProjects/spotify-react-app-template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/celinaperalta/Documents/SideProjects/spotify-react-app-template/src/App.js\";\nimport AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport IconButton from '@material-ui/core/IconButton';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport { ListItem, List, ListItemText, Grid } from '@material-ui/core/List';\nimport React, { Component } from 'react';\nimport './App.css';\nimport fetchPlayer from './fetchPlayer';\nimport spfetch from './spfetch';\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      isLoggedIn: spfetch.isLoggedIn()\n    };\n    _this.handleLoginClick = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.t0 = _this;\n              _context.next = 3;\n              return spfetch.login();\n\n            case 3:\n              _context.t1 = _context.sent;\n              _context.t2 = {\n                isLoggedIn: _context.t1\n              };\n\n              _context.t0.setState.call(_context.t0, _context.t2);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      var isLoggedIn = this.state.isLoggedIn;\n      return isLoggedIn ? /*#__PURE__*/React.createElement(LoggedInScreen, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 7\n        }\n      }) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        className: '',\n        onClick: this.handleLoginClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 9\n        }\n      }, \"Log In With Spotify\"));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nvar LoggedInScreen = /*#__PURE__*/function (_Component2) {\n  _inherits(LoggedInScreen, _Component2);\n\n  function LoggedInScreen() {\n    var _getPrototypeOf3;\n\n    var _this2;\n\n    _classCallCheck(this, LoggedInScreen);\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    _this2 = _possibleConstructorReturn(this, (_getPrototypeOf3 = _getPrototypeOf(LoggedInScreen)).call.apply(_getPrototypeOf3, [this].concat(args)));\n    _this2.state = {\n      name: null,\n      href: null,\n      imageUrl: null,\n      numFollowers: null,\n      player: null,\n      playerState: {},\n      playlists: null\n    };\n    _this2.handlePlayTopTracks = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _yield$spfetch, items;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return spfetch('/v1/me/top/tracks');\n\n            case 2:\n              _yield$spfetch = _context2.sent;\n              items = _yield$spfetch.items;\n\n              _this2.state.player.play(items.map(function (_ref3) {\n                var uri = _ref3.uri;\n                return uri;\n              }));\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    _this2.handlePlayPreviousTrack = function () {\n      return _this2.state.player.previousTrack();\n    };\n\n    _this2.handlePlayNextTrack = function () {\n      return _this2.state.player.nextTrack();\n    };\n\n    _this2.handleResume = function () {\n      return _this2.state.player.resume();\n    };\n\n    _this2.handlePause = function () {\n      return _this2.state.player.pause();\n    };\n\n    return _this2;\n  }\n\n  _createClass(LoggedInScreen, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.getMe();\n\n              case 2:\n                _context3.next = 4;\n                return this.getPlaylists();\n\n              case 4:\n                this.initPlayer();\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"initPlayer\",\n    value: function () {\n      var _initPlayer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var _this3 = this;\n\n        var player;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return fetchPlayer();\n\n              case 2:\n                player = global.player = _context4.sent;\n                this.setState({\n                  player: player\n                });\n                player.addListener('player_state_changed', function (playerState) {\n                  return _this3.setState({\n                    playerState: playerState\n                  });\n                });\n\n              case 5:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function initPlayer() {\n        return _initPlayer.apply(this, arguments);\n      }\n\n      return initPlayer;\n    }()\n  }, {\n    key: \"getMe\",\n    value: function () {\n      var _getMe = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        var _yield$spfetch2, name, href, _yield$spfetch2$image, _yield$spfetch2$image2, _yield$spfetch2$image3, imageUrl, numFollowers;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return spfetch('/v1/me');\n\n              case 2:\n                _yield$spfetch2 = _context5.sent;\n                name = _yield$spfetch2.display_name;\n                href = _yield$spfetch2.href;\n                _yield$spfetch2$image = _yield$spfetch2.images;\n                _yield$spfetch2$image = _yield$spfetch2$image === void 0 ? [] : _yield$spfetch2$image;\n                _yield$spfetch2$image2 = _slicedToArray(_yield$spfetch2$image, 1), _yield$spfetch2$image3 = _yield$spfetch2$image2[0];\n                _yield$spfetch2$image3 = _yield$spfetch2$image3 === void 0 ? {} : _yield$spfetch2$image3;\n                imageUrl = _yield$spfetch2$image3.url, numFollowers = _yield$spfetch2.followers.total;\n                this.setState({\n                  name: name,\n                  href: href,\n                  imageUrl: imageUrl,\n                  numFollowers: numFollowers\n                });\n                return _context5.abrupt(\"return\", true);\n\n              case 12:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function getMe() {\n        return _getMe.apply(this, arguments);\n      }\n\n      return getMe;\n    }()\n  }, {\n    key: \"getPlaylists\",\n    value: function () {\n      var _getPlaylists = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        var _this4 = this;\n\n        var _yield$spfetch3, data, playlists;\n\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return spfetch('/v1/me/playlists');\n\n              case 2:\n                _yield$spfetch3 = _context6.sent;\n                data = _yield$spfetch3.items;\n                playlists = data.map(function (d) {\n                  return /*#__PURE__*/React.createElement(\"li\", {\n                    key: d.name,\n                    __self: _this4,\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 96,\n                      columnNumber: 7\n                    }\n                  }, d.name);\n                });\n                this.setState(playlists);\n\n              case 6:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function getPlaylists() {\n        return _getPlaylists.apply(this, arguments);\n      }\n\n      return getPlaylists;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          name = _this$state.name,\n          imageUrl = _this$state.imageUrl,\n          numFollowers = _this$state.numFollowers,\n          player = _this$state.player,\n          _this$state$playerSta = _this$state.playerState,\n          _this$state$playerSta2 = _this$state$playerSta.paused,\n          paused = _this$state$playerSta2 === void 0 ? true : _this$state$playerSta2,\n          context = _this$state$playerSta.context,\n          _this$state$playerSta3 = _this$state$playerSta.track_window;\n      _this$state$playerSta3 = _this$state$playerSta3 === void 0 ? {} : _this$state$playerSta3;\n      var _this$state$playerSta4 = _this$state$playerSta3.current_track;\n      _this$state$playerSta4 = _this$state$playerSta4 === void 0 ? {} : _this$state$playerSta4;\n      var currentTrackName = _this$state$playerSta4.name,\n          _this$state$playerSta5 = _this$state$playerSta.restrictions;\n      _this$state$playerSta5 = _this$state$playerSta5 === void 0 ? {} : _this$state$playerSta5;\n      var _this$state$playerSta6 = _this$state$playerSta5.disallow_pausing_reasons;\n      _this$state$playerSta6 = _this$state$playerSta6 === void 0 ? [] : _this$state$playerSta6;\n\n      var _this$state$playerSta7 = _slicedToArray(_this$state$playerSta6, 1),\n          pauseRestrictedReason = _this$state$playerSta7[0],\n          _this$state$playerSta8 = _this$state$playerSta5.disallow_skipping_prev_reasons;\n\n      _this$state$playerSta8 = _this$state$playerSta8 === void 0 ? [] : _this$state$playerSta8;\n\n      var _this$state$playerSta9 = _slicedToArray(_this$state$playerSta8, 1),\n          skipPreviousRestrictedReason = _this$state$playerSta9[0],\n          _this$state$playerSta10 = _this$state$playerSta5.disallow_skipping_next_reasons;\n\n      _this$state$playerSta10 = _this$state$playerSta10 === void 0 ? [] : _this$state$playerSta10;\n\n      var _this$state$playerSta11 = _slicedToArray(_this$state$playerSta10, 1),\n          skipNextRestrictedReason = _this$state$playerSta11[0],\n          playlists = _this$state.playlists;\n\n      var hasPlayer = !!player;\n      var hasContext = context;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(CssBaseline, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(AppBar, {\n        position: \"static\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Toolbar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h6\",\n        color: \"inherit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }\n      }, currentTrackName || 'Not playing anything'), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"grow\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(IconButton, {\n        color: \"inherit\",\n        disabled: !hasPlayer || !hasContext || !!skipPreviousRestrictedReason,\n        onClick: this.handlePlayPreviousTrack,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(SkipPreviousIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 15\n        }\n      })), paused ? /*#__PURE__*/React.createElement(IconButton, {\n        color: \"inherit\",\n        disabled: !hasPlayer || !hasContext,\n        onClick: this.handleResume,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(PlayArrowIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 17\n        }\n      })) : /*#__PURE__*/React.createElement(IconButton, {\n        color: \"inherit\",\n        disabled: !hasPlayer || !hasContext || !!pauseRestrictedReason,\n        onClick: this.handlePause,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(PauseIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(IconButton, {\n        color: \"inherit\",\n        disabled: !hasPlayer || !hasContext || !!skipNextRestrictedReason,\n        onClick: this.handlePlayNextTrack,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(SkipNextIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 15\n        }\n      })))), /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        justify: \"space-evenly\",\n        alignItems: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 9\n        }\n      }, playlists && /*#__PURE__*/React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }\n      }, playlists)), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 9\n        }\n      }, name && /*#__PURE__*/React.createElement(Card, {\n        className: \"Card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(CardActionArea, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(CardMedia, {\n        className: \"CardMedia\",\n        image: imageUrl,\n        title: name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(CardContent, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Typography, {\n        gutterBottom: true,\n        variant: \"h5\",\n        component: \"h2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 17\n        }\n      }, name), /*#__PURE__*/React.createElement(Typography, {\n        component: \"p\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 17\n        }\n      }, \"Followers: \", numFollowers))), /*#__PURE__*/React.createElement(CardActions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        size: \"small\",\n        color: \"primary\",\n        onClick: this.handlePlayTopTracks,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 15\n        }\n      }, \"Play Top Tracks\"))))));\n    }\n  }]);\n\n  return LoggedInScreen;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/celinaperalta/Documents/SideProjects/spotify-react-app-template/src/App.js"],"names":["AppBar","Button","Card","CardActionArea","CardActions","CardContent","CardMedia","CssBaseline","IconButton","Toolbar","Typography","PauseIcon","PlayArrowIcon","SkipNextIcon","SkipPreviousIcon","ListItem","List","ListItemText","Grid","React","Component","fetchPlayer","spfetch","App","state","isLoggedIn","handleLoginClick","login","setState","LoggedInScreen","name","href","imageUrl","numFollowers","player","playerState","playlists","handlePlayTopTracks","items","play","map","uri","handlePlayPreviousTrack","previousTrack","handlePlayNextTrack","nextTrack","handleResume","resume","handlePause","pause","getMe","getPlaylists","initPlayer","global","addListener","display_name","images","url","followers","total","data","d","paused","context","track_window","current_track","currentTrackName","restrictions","disallow_pausing_reasons","pauseRestrictedReason","disallow_skipping_prev_reasons","skipPreviousRestrictedReason","disallow_skipping_next_reasons","skipNextRestrictedReason","hasPlayer","hasContext"],"mappings":"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","sourcesContent":["import AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport IconButton from '@material-ui/core/IconButton';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport {ListItem, List, ListItemText, Grid } from '@material-ui/core/List';\nimport React, { Component } from 'react';\nimport './App.css';\nimport fetchPlayer from './fetchPlayer';\nimport spfetch from './spfetch';\n\nclass App extends Component {\n  // We might be logged in on load if the token could be extracted from the url hash\n  state = { isLoggedIn: spfetch.isLoggedIn() };\n\n  handleLoginClick = async () => {\n    this.setState({\n      isLoggedIn: await spfetch.login()\n    });\n  };\n\n  render() {\n    const { isLoggedIn } = this.state;\n    return isLoggedIn ? (\n      <LoggedInScreen />\n    ) : (\n      <div className=\"login\">\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          className={''}\n          onClick={this.handleLoginClick}\n        >\n          Log In With Spotify\n        </Button>\n      </div>\n    );\n  }\n}\n\nclass LoggedInScreen extends Component {\n  state = {\n    name: null,\n    href: null,\n    imageUrl: null,\n    numFollowers: null,\n    player: null,\n    playerState: {},\n    playlists: null\n  };\n\n  async componentDidMount() {\n    await this.getMe();\n    await this.getPlaylists();\n    this.initPlayer();\n  }\n\n  async initPlayer() {\n    // Let's fetch a connected player instance and also add it to `window` for debugging purposes\n    const player = (global.player = await fetchPlayer());\n    this.setState({ player });\n    player.addListener('player_state_changed', playerState =>\n      this.setState({\n        playerState\n      })\n    );\n  }\n\n  async getMe() {\n    const {\n      display_name: name,\n      href,\n      images: [{ url: imageUrl } = {}] = [],\n      followers: { total: numFollowers }\n    } = await spfetch('/v1/me'); \n\n    this.setState({ name, href, imageUrl, numFollowers });\n    return true;\n  }\n\n  async getPlaylists() {\n    const {\n      items: data\n    } = await spfetch('/v1/me/playlists');\n    const playlists = data.map((d) =>\n      <li key={d.name}>{d.name}</li>);\n    this.setState(playlists);\n  }\n\n  handlePlayTopTracks = async () => {\n    const { items } = await spfetch('/v1/me/top/tracks');\n    this.state.player.play(items.map(({ uri }) => uri));\n  };\n\n  handlePlayPreviousTrack = () => this.state.player.previousTrack();\n  handlePlayNextTrack = () => this.state.player.nextTrack();\n  handleResume = () => this.state.player.resume();\n  handlePause = () => this.state.player.pause();\n\n  render() {\n    const {\n      name,\n      imageUrl,\n      numFollowers,\n      player,\n      playerState: {\n        paused = true,\n        context,\n        track_window: { current_track: { name: currentTrackName } = {} } = {},\n        restrictions: {\n          disallow_pausing_reasons: [pauseRestrictedReason] = [],\n          disallow_skipping_prev_reasons: [skipPreviousRestrictedReason] = [],\n          disallow_skipping_next_reasons: [skipNextRestrictedReason] = []\n        } = {}\n      },\n      playlists\n    } = this.state;\n\n    const hasPlayer = !!player;\n    const hasContext = context;\n\n    return (\n      <div className=\"App\">\n        <CssBaseline/>\n\n        <AppBar position=\"static\">\n          <Toolbar>\n            <Typography variant=\"h6\" color=\"inherit\">\n              {currentTrackName || 'Not playing anything'}\n            </Typography>\n\n            <div className=\"grow\" />\n\n            <IconButton\n              color=\"inherit\"\n              disabled={\n                !hasPlayer || !hasContext || !!skipPreviousRestrictedReason\n              }\n              onClick={this.handlePlayPreviousTrack}\n            >\n              <SkipPreviousIcon />\n            </IconButton>\n\n            {paused ? (\n              <IconButton\n                color=\"inherit\"\n                disabled={!hasPlayer || !hasContext}\n                onClick={this.handleResume}\n              >\n                <PlayArrowIcon />\n              </IconButton>\n            ) : (\n              <IconButton\n                color=\"inherit\"\n                disabled={!hasPlayer || !hasContext || !!pauseRestrictedReason}\n                onClick={this.handlePause}\n              >\n                <PauseIcon />\n              </IconButton>\n            )}\n\n            <IconButton\n              color=\"inherit\"\n              disabled={!hasPlayer || !hasContext || !!skipNextRestrictedReason}\n              onClick={this.handlePlayNextTrack}\n            >\n              <SkipNextIcon />\n            </IconButton>\n          </Toolbar>\n        </AppBar>\n\n        <Grid\n        container\n        direction = \"row\"\n        justify = \"space-evenly\"\n        alignItems = \"center\">\n        \n        <Grid item xs={6}>\n            {playlists &&\n            <ul>\n              {playlists}\n              </ul>}\n        </Grid>\n        \n        <Grid item xs={6}>\n        {name && (\n          <Card className=\"Card\">\n            <CardActionArea>\n              <CardMedia className=\"CardMedia\" image={imageUrl} title={name} />\n              <CardContent>\n                <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                  {name}\n                </Typography>\n                <Typography component=\"p\">Followers: {numFollowers}</Typography>\n              </CardContent>\n            </CardActionArea>\n            <CardActions>\n              <Button\n                size=\"small\"\n                color=\"primary\"\n                onClick={this.handlePlayTopTracks}>\n                Play Top Tracks\n              </Button>\n            </CardActions>\n          </Card>)}\n            </Grid>\n        </ Grid>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}